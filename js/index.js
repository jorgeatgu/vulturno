var t,a,e=void 0;function n(){var t=['<span class="notas-text-temp">Temperatura más alta registrada en <strong>Zaragoza</strong>.</span><span class="notas-text-number">44.5ºC</span><span class="notas-text-date">07/07/2015</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Albacete</strong>.</span><span class="notas-text-number">42.6ºC</span><span class="notas-text-date">17/07/1978</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Alicante</strong>.</span><span class="notas-text-number">42.6ºC</span><span class="notas-text-date">04/07/1994</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Almería</strong>.</span><span class="notas-text-number">41.2ºC</span><span class="notas-text-date">30/07/1981</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Avila</strong>.</span><span class="notas-text-number">37.6ºC</span><span class="notas-text-date">24/07/1995</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Badajoz</strong>.</span><span class="notas-text-number">45.4ºC</span><span class="notas-text-date">13/07/2017</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Barcelona</strong>.</span><span class="notas-text-number">37.4ºC</span><span class="notas-text-date">28/08/2010</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Bilbao</strong>.</span><span class="notas-text-number">41.9ºC</span><span class="notas-text-date">04/08/2003</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Burgos</strong>.</span><span class="notas-text-number">38.8ºC</span><span class="notas-text-date">04/08/2003</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Caceres</strong>.</span><span class="notas-text-number">43.2ºC</span><span class="notas-text-date">13/07/2017</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Castellón</strong>.</span><span class="notas-text-number">40.6ºC</span><span class="notas-text-date">23/07/2009</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Ciudad Real</strong>.</span><span class="notas-text-number">43.7ºC</span><span class="notas-text-date">13/07/2009</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Cordoba</strong>.</span><span class="notas-text-number">46.9ºC</span><span class="notas-text-date">13/07/2009</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>A Coruña</strong>.</span><span class="notas-text-number">39.6ºC</span><span class="notas-text-date">28/08/1961</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Donostia</strong>.</span><span class="notas-text-number">38.6ºC</span><span class="notas-text-date">04/08/2003</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Girona</strong>.</span><span class="notas-text-number">43ºC</span><span class="notas-text-date">28/06/2019</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Gran Canaria</strong>.</span><span class="notas-text-number">44.2ºC</span><span class="notas-text-date">13/07/1952</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Granada</strong>.</span><span class="notas-text-number">43.5ºC</span><span class="notas-text-date">13/07/2017</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Huelva</strong>.</span><span class="notas-text-number">43.8ºC</span><span class="notas-text-date">25/07/2004</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Huesca</strong>.</span><span class="notas-text-number">42.6ºC</span><span class="notas-text-date">07/07/1982</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Jerez</strong>.</span><span class="notas-text-number">45.1ºC</span><span class="notas-text-date">07/08/2003</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>León</strong>.</span><span class="notas-text-number">38.2ºC</span><span class="notas-text-date">13/08/1987</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Lleida</strong>.</span><span class="notas-text-number">43.4ºC</span><span class="notas-text-date">29/06/2019</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Logroño</strong>.</span><span class="notas-text-number">42.8ºC</span><span class="notas-text-date">07/07/1982</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Madrid</strong>.</span><span class="notas-text-number">40.7ºC</span><span class="notas-text-date">28/06/2019</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Málaga</strong>.</span><span class="notas-text-number">44.2ºC</span><span class="notas-text-date">18/07/2019</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Mallorca</strong>.</span><span class="notas-text-number">41.4ºC</span><span class="notas-text-date">25/06/2001</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Melilla</strong>.</span><span class="notas-text-number">41.8ºC</span><span class="notas-text-date">06/07/1994</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Murcia</strong>.</span><span class="notas-text-number">40.5ºC</span><span class="notas-text-date">12/07/1961</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Ourense</strong>.</span><span class="notas-text-number">42.6ºC</span><span class="notas-text-date">20/07/1990</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Oviedo</strong>.</span><span class="notas-text-number">37ºC</span><span class="notas-text-date">18/07/2016</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Palencia</strong>.</span><span class="notas-text-number">40ºC</span><span class="notas-text-date">28/06/2019</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Pamplona</strong>.</span><span class="notas-text-number">40ºC</span><span class="notas-text-date">18/08/2012</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Pontevedra</strong>.</span><span class="notas-text-number">40ºC</span><span class="notas-text-date">14/06/2012</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Reus</strong>.</span><span class="notas-text-number">39.8ºC</span><span class="notas-text-date">04/08/2012</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Salamanca</strong>.</span><span class="notas-text-number">41ºC</span><span class="notas-text-date">10/08/2012</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Santander</strong>.</span><span class="notas-text-number">37.6ºC</span><span class="notas-text-date">30/06/1968</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Santiago</strong>.</span><span class="notas-text-number">39.4ºC</span><span class="notas-text-date">20/07/1990</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Segovia</strong>.</span><span class="notas-text-number">39.2ºC</span><span class="notas-text-date">15/07/1967</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Sevilla</strong>.</span><span class="notas-text-number">46.6ºC</span><span class="notas-text-date">23/07/1995</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Soria</strong>.</span><span class="notas-text-number">38ºC</span><span class="notas-text-date">28/07/1951</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Tenerife</strong>.</span><span class="notas-text-number">41.4ºC</span><span class="notas-text-date">31/07/2009</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Toledo</strong>.</span><span class="notas-text-number">43.1ºC</span><span class="notas-text-date">10/08/2012</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Valencia</strong>.</span><span class="notas-text-number">43ºC</span><span class="notas-text-date">27/08/2010</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Valladolid</strong>.</span><span class="notas-text-number">39.4ºC</span><span class="notas-text-date">24/07/1995</span>','<span class="notas-text-temp">Temperatura más alta registrada en <strong>Vitoria</strong>.</span><span class="notas-text-number">40.8ºC</span><span class="notas-text-date">10/08/2012</span>'],a=Math.floor(Math.random()*t.length);document.getElementById("notas-temp").innerHTML=t[a]}!function(){var t=document.querySelector(".overlay"),a=document.querySelector(".navegacion"),e=document.querySelector("body"),n=document.querySelectorAll(".navegacion-btn"),s=document.querySelector(".burger");function r(){s.classList.toggle("clicked"),t.classList.toggle("show"),a.classList.toggle("show"),e.classList.toggle("overflow")}document.querySelector(".burger").addEventListener("click",r),document.querySelector(".overlay").addEventListener("click",r);for(var c=0;c<n.length;c++)n[c].addEventListener("click",(function(){o()}));function o(){t.classList.remove("show"),a.classList.remove("show"),s.classList.remove("clicked")}}(),t=['<span class="notas-text">La Central Térmica de <strong>AS Pontes</strong> propiedad de <strong>Endesa</strong> es el <strong>mayor emisor de CO2<strong> en España.','<span class="notas-text">La Central Térmica de <strong>Aboño</strong> propiedad de <strong>Endesa</strong> es el <strong>segundo mayor emisor de CO2<strong> en España.','<span class="notas-text">La Central Térmica de <strong>Litoral</strong> propiedad de <strong>Endesa</strong> es el <strong>tercer emisor de CO2<strong> en España.','<span class="notas-text">La Siderurgica de <strong>ArcelorMittal</strong> es el <strong>cuarto emisor de CO2<strong> en España.','<span class="notas-text">La Central Térmica de <strong>Teruel</strong> propiedad de <strong>Endesa</strong> es el <strong>quinto emisor de CO2<strong> en España.'],a=Math.floor(Math.random()*t.length),document.getElementById("notas").innerHTML=t[a],n(),setInterval((function(){n()}),3e3);var s=document.getElementById("select-city"),r=document.getElementById("select-scatter-city"),c=document.getElementById("select-city-tropical");function o(t){d3.csv("csv/stations.csv",(function(a,e){if(a)console.log(a);else{var n=e,s=d3.nest().key((function(t){return t.Name})).entries(n);d3.select(t).selectAll("option").data(s).enter().append("option").attr("value",(function(t){return t.key})).text((function(t){return t.key}))}}))}var i,l,u,d=[d3.scaleOrdinal(["#f6d2d5","#f0b7bc","#ea969d","#e16973","#cc0011","#a2000d","#b8000f"]),d3.scaleOrdinal(["#004d84","#005da0","#006bb7","#0077cc","#4a9eda","#7db9e5","#a5cfed"])],p=window.innerWidth>0?window.innerWidth:screen.width,m=["csv/total-records-max.csv","csv/total-records-min.csv"],f=["maxima","minima"],g=["max","min"];function x(t,a,e){var n,s=d3.select(".chart-force-".concat(a)),r=s.select("svg"),c=1.5,o=s.append("div").attr("class","tooltip tooltip-record").style("opacity",0),i=s.append("div").attr("class","tooltip tooltip-decade").style("opacity",0);function l(n){var l=s.node().offsetWidth;r.attr("width",l).attr("height",600);var u=r.selectAll(".circle-".concat(a)).remove().exit().data(n).enter().append("circle").attr("class","circle-".concat(a)).attr("r",(function(t){return t.radius})).attr("fill",(function(t){return e(t.decade)})).attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})).on("mouseover",(function(t){var e=this;d3.selectAll(".circle-".concat(a)).filter((function(t,a){return this!==e})).transition().duration(300).ease(d3.easeLinear).style("opacity",.1),o.transition(),o.style("opacity",1).html('<p class="tooltip-record-max">En <span class="number">'.concat(t.year,'</span> se establecieron <span class="number">').concat(t.total,"</span> récords.<p/>\n                        "))})).on("mouseout",(function(){d3.selectAll(".circle-".concat(a)).transition().duration(800).ease(d3.easeLinear).style("opacity",1),o.transition().duration(200).style("opacity",0)}));d3.forceSimulation().force("forceX",d3.forceX().x(.5*l)).force("forceY",d3.forceY().y(300)).force("center",d3.forceCenter().x(.5*l).y(300)).force("charge",d3.forceManyBody().strength(5)).force("collision",d3.forceCollide().radius((function(t){return t.radius+1}))).nodes(n).force("collide",d3.forceCollide().strength(.5).radius((function(t){return t.radius+c})).iterations(1)).on("tick",(function(){return u.attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y}))}));var d=d3.group(n.map((function(t){return t.decade}))),m=d.filter((function(t,a){return d.indexOf(t)===a}));m=m.reverse((function(t){return t.decade}));var f=r.selectAll(".legend-".concat(a)).remove().exit().data(m,(function(t){return t})).enter().append("g").attr("class","legend-".concat(a)).attr("year",(function(t){return t}));function g(e){var n=e.attr("year");d3.csv(t,(function(t,e){var s=e.filter((function(t){return String(t.decade).match(n)}));i.data(s).style("opacity",1).html((function(t){return'<p class="tooltip-record-max">Entre <span class="number">'.concat(t.decade,'</span> y <span class="number">').concat(Number(t.decade)+9,'</span> se establecieron <span class="number">').concat(t.totaldecade,"</span> récords de temperatura ").concat(a,".<p/>")}))}))}p>544?(f.attr("transform",(function(t,a){return"translate(".concat(50,",",25*(a+5),")")})),f.append("text").attr("x",20).attr("y",10).text((function(t){return t}))):(f.attr("transform",(function(t,a){return"translate(".concat(45*a,",",50,")")})),f.append("text").attr("x",14).attr("y",9).text((function(t){return t}))),f.append("rect").attr("width",10).attr("height",10).style("fill",(function(t){return e(t)})),f.on("mouseover",(function(t){var e=d3.select(this);d3.selectAll(".legend-".concat(a)).transition().duration(300).ease(d3.easeLinear).style("opacity",.1),e.transition().duration(300).ease(d3.easeLinear).style("opacity",1),d3.selectAll(".circle-".concat(a)).transition().duration(200).ease(d3.easeLinear).style("opacity",.1).filter((function(a){return a.decade===t})).transition().duration(300).ease(d3.easeLinear).style("opacity",1),d3.select(this).call(g)})).on("mouseout",(function(){d3.selectAll(".legend-".concat(a)).transition().duration(300).ease(d3.easeLinear).style("opacity",1),d3.selectAll(".circle-".concat(a)).transition().duration(300).ease(d3.easeLinear).style("opacity",1),i.style("opacity",0)}))}r.append("text").attr("class","legend-title").text("Décadas"),p>544?r.select(".legend-title").attr("transform","translate(50,110)"):r.select(".legend-title").attr("transform","translate(0,30)");window.addEventListener("resize",(function(){l(n)})),d3.csv(t,(function(t,a){t?console.log(t):((n=a).forEach((function(t){t.size=p>544?+t.total/10:+t.total/17,t.radius=+t.size,t.year=t.year})),l(n))}))}i=new Date,l=i.getDate(),u=i.getMonth()+1,document.getElementById("updateButtonDay").value=l,document.getElementById("updateButtonMonth").value=u,x(m[0],f[0],d[0]),x(m[1],f[1],d[1]);var y,v,h,b,L,C,k,w,T,E,A,S,B;function z(t){var a,e=16,n=16,s=32,r=48,c=0,o=0,i=d3.select(".chart-diff-records-".concat(t)),l=i.select("svg"),u={},d=d3.select(".chart-diff-records-".concat(t)).append("div").attr("class","tooltip tooltip-diff").style("opacity",0),p=d3.select("#select-month-".concat(t)),m=d3.select("#select-cities-records-".concat(t)),f="".concat(t),g=function(a){var p=i.node().offsetWidth;c=p-r-n,o=600-e-s,l.attr("width",p).attr("height",600);var g="translate(".concat(r,",").concat(e,")"),x=l.select(".chart-diff-records-container");x.attr("transform",g),function(t,a){u.count.x.range([15,t]),u.count.y.range([a,0])}(c,o);var y=i.select(".chart-diff-records-container-bis"),v=y.selectAll(".circle-primero-".concat(t)).data(a);v.exit().remove();var h=y.selectAll(".circle-segundo-".concat(t)).data(a);h.exit().remove();var b=y.selectAll(".circle-lines").data(a);b.exit().remove();var L=v.enter().append("circle").attr("class","circle-primero-".concat(t)),C=h.enter().append("circle").attr("class","circle-segundo-".concat(t)),k=b.enter().append("line").attr("class","circle-lines");b.merge(k).transition().duration(500).ease(d3.easeLinear).attr("x1",(function(t){return u.count.x(t.dia)})).attr("y1",(function(t){return"max"===f?u.count.y(t.primero)+6:u.count.y(t.primero)-6})).attr("x2",(function(t){return u.count.x(t.dia)})).attr("y2",(function(t){return"max"===f?u.count.y(t.segundo)-6:u.count.y(t.segundo)+6})).attr("stroke",(function(t){return 0===t.diff?"none":"#111"}));var w=m.property("value");v.merge(L).on("mouseover",(function(a){var e=u.count.x(a.dia)+270,n="".concat(d3.event.pageX,"px"),s="".concat(d3.event.pageX-210,"px");d.transition(),d.style("opacity",1).html('<p class="tooltip-diff-text">La temperatura '.concat(t," en ").concat(w," se registro en ").concat(a.yearprimera," y fue de ").concat(a.primero,"ºC<p/>")).style("left",e>p?s:n).style("top","".concat(d3.event.pageY-28,"px"))})).on("mouseout",(function(){d.transition().duration(200).style("opacity",0)})).transition().duration(500).ease(d3.easeLinear).attr("cy",(function(t){return u.count.y(t.primero)})).attr("cx",(function(t){return u.count.x(t.dia)})).attr("r",6),h.merge(C).on("mouseover",(function(a){var e=u.count.x(a.dia)+270,n="".concat(d3.event.pageX,"px"),s="".concat(d3.event.pageX-210,"px");d.transition(),d.style("opacity",1).html('<p class="tooltip-diff-text">La segunda temperatura '.concat(t," en ").concat(w," se registro en ").concat(a.yearsegundo," y fue de ").concat(a.segundo,"ºC<p/>")).style("left",e>p?s:n).style("top","".concat(d3.event.pageY-28,"px"))})).on("mouseout",(function(){d.transition().duration(200).style("opacity",0)})).transition().duration(500).ease(d3.easeLinear).attr("cy",(function(t){return u.count.y(t.segundo)})).attr("cx",(function(t){return u.count.x(t.dia)})).attr("r",(function(t){return 0===t.diff?0:6})),function(t){var a=d3.axisBottom(u.count.x).tickPadding(5).tickFormat(d3.format("d")).ticks(31);t.select(".axis-x").attr("transform","translate(0,".concat(o,")")).transition().duration(500).ease(d3.easeLinear).call(a);var e=d3.axisLeft(u.count.y).tickPadding(5).tickFormat((function(t){return t+"ºC"})).ticks(15).tickSizeInner(-c);t.select(".axis-y").transition().duration(500).ease(d3.easeLinear).call(e)}(x)},x=function(){var a=p.property("value"),e=m.property("value").replace(/ /g,"_").normalize("NFD").replace(/[\u0300-\u036f]/g,"");d3.csv("csv/".concat(t,"/dos-records/").concat(e,"-dos-records.csv"),(function(t,e){if((e=e.filter((function(t){return String(t.mes).match(a)}))).forEach((function(t){t.fecha=+t.fecha,t.primero=+t.primero,t.segundo=+t.segundo,t.diff=t.primero-t.segundo,t.dia=+t.dia})),"max"===f){var n=d3.scaleTime().domain([d3.min(e,(function(t){return t.dia})),d3.max(e,(function(t){return t.dia}))]),s=d3.scaleLinear().domain([d3.min(e,(function(t){return t.segundo-1})),d3.max(e,(function(t){return t.primero+1}))]);u.count={x:n,y:s}}else{var r=d3.scaleTime().domain([d3.min(e,(function(t){return t.dia})),d3.max(e,(function(t){return t.dia}))]),c=d3.scaleLinear().domain([d3.min(e,(function(t){return t.primero-1})),d3.max(e,(function(t){return t.segundo+1}))]);u.count={x:r,y:c}}g(e)}))};window.addEventListener("resize",(function(){g(a)})),d3.csv("csv/".concat(t,"/dos-records/Albacete-dos-records.csv"),(function(t,e){var n;t?console.log(t):((a=e.filter((function(t){return String(t.mes).match("Enero")}))).forEach((function(t){t.fecha=+t.fecha,t.primero=+t.primero,t.segundo=+t.segundo,t.diff=t.primero-t.segundo,t.dia=+t.dia})),(n=l.select(".chart-diff-records-container")).append("g").attr("class","axis axis-x"),n.append("g").attr("class","axis axis-y"),n.append("g").attr("class","chart-diff-records-container-bis"),function(){if("max"===f){var t=d3.scaleTime().domain([d3.min(a,(function(t){return t.dia})),d3.max(a,(function(t){return t.dia}))]),e=d3.scaleLinear().domain([d3.min(a,(function(t){return t.segundo-1})),d3.max(a,(function(t){return t.primero+1}))]);u.count={x:t,y:e}}else{var n=d3.scaleTime().domain([d3.min(a,(function(t){return t.dia})),d3.max(a,(function(t){return t.dia}))]),s=d3.scaleLinear().domain([d3.min(a,(function(t){return t.primero-1})),d3.max(a,(function(t){return t.segundo+1}))]);u.count={x:n,y:s}}}(),g(a),d3.csv("csv/mes.csv",(function(t,a){if(t)console.log(t);else{var e=a,n=d3.nest().key((function(t){return t.Mes})).entries(e);p.selectAll("option").data(n).enter().append("option").attr("value",(function(t){return t.key})).attr("number",(function(t,a){return a+1})).text((function(t){return t.key})),p.on("change",(function(){x()}))}})),d3.csv("csv/stations.csv",(function(t,a){if(t)console.log(t);else{var e=a,n=d3.nest().key((function(t){return t.Name})).entries(e);m.selectAll("option").data(n).enter().append("option").attr("value",(function(t){return t.key})).text((function(t){return t.key})),m.on("change",(function(){x()}))}})))}))}!function(){var t,a={top:16,right:16,bottom:24,left:24},e=0,n=0,s=d3.select(".chart-cities-tropical"),r=s.select("svg"),i={},l=s.append("div").attr("class","tooltip tooltip-tropical").style("opacity",0),u=function(){var a=d3.scaleBand().domain(t.map((function(t){return t.fecha}))),e=d3.scaleLinear().domain([0,d3.max(t,(function(t){return 1.25*t.tropical}))]);i.count={x:a,y:e}},d=function(t,a){i.count.x.range([0,t]).paddingInner(-.1),i.count.y.range([a,0])},p=function(t){var a=d3.axisBottom(i.count.x).tickPadding(5).tickFormat(d3.format("d")).tickValues(i.count.x.domain().filter((function(t,a){return!(a%5)})));t.select(".axis-x").attr("transform","translate(0,".concat(n,")")).transition().duration(500).ease(d3.easeLinear).call(a);var s=d3.axisLeft(i.count.y).tickPadding(5).tickFormat((function(t){return t})).tickSize(-e).ticks(6);t.select(".axis-y").transition().duration(500).ease(d3.easeLinear).call(s)};function m(c){var o=s.node().offsetWidth;e=o-a.left-a.right,n=544-a.top-a.bottom,r.attr("width",o).attr("height",544);var u="translate(".concat(a.left,",").concat(a.top,")"),m=r.select(".chart-cities-tropical-container");m.attr("transform",u),d(e,n);var f=s.select(".chart-cities-tropical-container-bis").selectAll(".bar-cities-tropical").data(t),g=f.enter().append("rect").attr("class","bar-cities-tropical");f.merge(g).on("mouseover",(function(t){var a=i.count.x(t.fecha)+270,e="".concat(d3.event.pageX,"px"),n="".concat(d3.event.pageX-210,"px");l.transition(),l.style("opacity",1).html('\n                        <p class="tooltip-year">En <strong>'.concat(t.fecha,"</strong> hubo un total de <strong>").concat(t.tropical,"</strong> noches tropicales.</p>\n                        ")).style("left",a>o?n:e).style("top","".concat(d3.event.pageY-28,"px"))})).on("mouseout",(function(t){l.transition().duration(300).style("opacity",0)})).transition().duration(500).ease(d3.easeLinear).attr("width",i.count.x.bandwidth()).attr("x",(function(t){return i.count.x(t.year)})).attr("y",(function(t){return i.count.y(t.total)})).attr("height",(function(t){return n-i.count.y(t.total)})),p(m)}function f(a){d3.csv("csv/tropicales/".concat(a,"-total-tropicales.csv"),(function(a,e){(t=e).forEach((function(t){t.fecha=+t.year,t.tropical=+t.total})),u(),m()}))}window.addEventListener("resize",(function(){var a=d3.select("#select-city-tropical").property("value").replace(/[\u00f1-\u036f]/g,"").replace(/ /g,"_").replace(/á/g,"a").replace(/Á/g,"A").replace(/é/g,"e").replace(/è/g,"e").replace(/í/g,"i").replace(/ó/g,"o").replace(/ú/g,"u").replace(/ñ/g,"n");d3.csv("csv/tropicales/".concat(a,"-total-tropicales.csv"),(function(a,e){t=e,m()}))})),d3.csv("csv/tropicales/Albacete-total-tropicales.csv",(function(a,e){var n;a?console.log(a):((t=e).forEach((function(t){t.fecha=+t.year,t.tropical=+t.total})),(n=r.select(".chart-cities-tropical-container")).append("g").attr("class","axis axis-x"),n.append("g").attr("class","axis axis-y"),n.append("g").attr("class","chart-cities-tropical-container-bis"),u(),m(),f("Albacete"))})),o(c),d3.select("#select-city-tropical").on("change",(function(){f(d3.select(this).property("value").replace(/ /g,"_").normalize("NFD").replace(/[\u0300-\u036f]/g,""))}))}(),function(){var t,a=16,e=16,n=32,s=32,c=0,i=0,l=d3.select(".scatter-inputs"),u=l.select("svg"),d={},p=d3.select("#select-scatter-city"),m=d3.select(".scatter-inputs").append("div").attr("class","tooltip tooltip-scatter").style("opacity",0),f=function(t){return t.split("-")[0]},g=function(t,a){d.count.x.range([0,t]),d.count.y.range([a,0])},x=function(t){var a=d3.axisBottom(d.count.x).tickPadding(10).tickFormat(d3.format("d")).ticks(10);t.select(".axis-x").attr("transform","translate(0,".concat(i,")")).transition().duration(500).ease(d3.easeLinear).call(a);var e=d3.axisLeft(d.count.y).tickFormat((function(t){return t+"ºC"})).tickSize(-c).ticks(6);t.select(".axis-y").transition().duration(500).ease(d3.easeLinear).call(e)},y=function(t){var r=l.node().offsetWidth;c=r-s-e,i=544-a-n,u.attr("width",r).attr("height",544);var o="translate(".concat(s,",").concat(a,")"),f=u.select(".scatter-inputs-container");f.attr("transform",o);var y=d3.line().x((function(t){return d.count.x(t.year)})).y((function(t){return d.count.y(t.minima)}));g(c,i);var v=l.select(".scatter-inputs-container-dos"),h=v.selectAll(".scatter-inputs-circles").remove().exit().data(t),b=v.selectAll(".lines").data([t]),L=h.enter().append("circle").attr("class","scatter-inputs-circles"),C=p.property("value"),k=b.enter().append("path").attr("class","lines");b.merge(k).transition().duration(600).ease(d3.easeLinear).attr("d",y),h.merge(L).on("mouseover",(function(t){var a=d.count.x(t.year)+270,e="".concat(d3.event.pageX,"px"),n="".concat(d3.event.pageX-210,"px");m.transition(),m.attr("class","tooltip tooltip-scatter tooltip-min"),m.style("opacity",1).html('<p class="tooltip-scatter-text">La temperatura mínima de '.concat(C," en ").concat(t.year," fue de ").concat(t.minima,"ºC<p/>")).style("left",a>r?n:e).style("top","".concat(d3.event.pageY-28,"px"))})).on("mouseout",(function(){m.transition().duration(200).style("opacity",0)})).attr("cx",(function(t){return d.count.x(t.year)})).attr("cy",(function(t,a){return a*(Math.random()*a)})).attr("fill-opacity",1).transition().delay((function(t,a){return 10*a})).duration(450).ease(d3.easeLinear).attr("cx",(function(t){return d.count.x(t.year)})).attr("cy",(function(t){return d.count.y(t.minima)})).style("fill","#257d98"),x(f)},v=function(){var t=d3.select("#updateButtonDay").property("value"),r=d3.select("#updateButtonMonth").property("value");t<10&&(t="0".concat(t).slice(-2)),r<10&&(r="0".concat(r).slice(-2));var o="".concat(r,"-").concat(t),y=new RegExp("^.*".concat(o,"$"),"gi");h();var v=p.property("value").replace(/ /g,"_").normalize("NFD").replace(/[\u0300-\u036f]/g,"");d3.csv("csv/day-by-day/".concat(v,"-diarias.csv"),(function(t,r){(r=r.filter((function(t){return String(t.fecha).match(y)}))).forEach((function(t){t.fecha=t.fecha,t.maxima=+t.maxima,t.minima=+t.minima,t.year=f(t.fecha)})),d.count.x.range([0,c]),d.count.y.range([i,0]);var o=d3.scaleTime().domain([d3.min(r,(function(t){return t.year})),d3.max(r,(function(t){return t.year}))]),v=d3.scaleLinear().domain([d3.min(r,(function(t){return t.maxima-2})),d3.max(r,(function(t){return t.maxima+2}))]),h=l.node().offsetWidth;c=h-s-e,i=544-a-n,u.attr("width",h).attr("height",544),d.count={x:o,y:v};var b="translate(".concat(s,",").concat(a,")"),L=u.select(".scatter-inputs-container");L.attr("transform",b),g(c,i);var C=d3.line().x((function(t){return d.count.x(t.year)})).y((function(t){return d.count.y(t.maxima)})),k=l.select(".scatter-inputs-container-dos"),w=k.selectAll(".lines").data([r]),T=w.enter().append("path").attr("class","lines");w.merge(T).transition().duration(600).ease(d3.easeLinear).attr("d",C);var E=k.selectAll(".scatter-inputs-circles").remove().exit().data(r),A=E.enter().append("circle").attr("class","scatter-inputs-circles"),S=p.property("value");E.merge(A).on("mouseover",(function(t){var a=l.node().offsetWidth,e=d.count.x(t.year)+270,n="".concat(d3.event.pageX,"px"),s="".concat(d3.event.pageX-210,"px");m.transition(),m.attr("class","tooltip tooltip-scatter tooltip-max"),m.style("opacity",1).html('<p class="tooltip-scatter-text">La temperatura máxima de '.concat(S," en ").concat(t.year," fue de ").concat(t.maxima,"ºC<p/>")).style("left",e>a?s:n).style("top","".concat(d3.event.pageY-28,"px"))})).on("mouseout",(function(){m.transition().duration(200).style("opacity",0)})).attr("cx",(function(t){return d.count.x(t.year)})).attr("cy",(function(t){return d.count.y(t.minima)})).attr("fill-opacity",1).transition().delay((function(t,a){return 10*a})).duration(450).ease(d3.easeLinear).attr("cx",(function(t){return d.count.x(t.year)})).attr("cy",(function(t){return d.count.y(t.maxima)})).attr("r",6).style("fill","#dc7176"),x(L)}))},h=function(){var t=document.getElementById("fail-month"),a=d3.select("#updateButtonDay").property("value"),e=d3.select("#updateButtonMonth").property("value");b(a,e,"2020")?t.classList.remove("fail-active"):t.classList.add("fail-active")},b=function(t,a,e){var n=new Date;return n.setFullYear(e,a-1,t),n.getFullYear()==e&&n.getMonth()==a-1&&n.getDate()==t};d3.select("#update").on("click",(function(t){v()})),d3.select("#updateMin").on("click",(function(t){!function(){var t=d3.select("#updateButtonDay").property("value"),a=d3.select("#updateButtonMonth").property("value");t<10&&(t="0".concat(t).slice(-2)),a<10&&(a="0".concat(a).slice(-2));var e="".concat(a,"-").concat(t),n=new RegExp("^.*".concat(e,"$"),"gi");h();var s=p.property("value").replace(/ /g,"_").normalize("NFD").replace(/[\u0300-\u036f]/g,"");d3.csv("csv/day-by-day/".concat(s,"-diarias.csv"),(function(t,a){(a=a.filter((function(t){return String(t.fecha).match(n)}))).forEach((function(t){t.fecha=t.fecha,t.maxima=+t.maxima,t.minima=+t.minima,t.year=f(t.fecha)})),d.count.x.range([0,c]),d.count.y.range([i,0]);var e=d3.scaleTime().domain([d3.min(a,(function(t){return t.year})),d3.max(a,(function(t){return t.year}))]),s=d3.scaleLinear().domain([d3.min(a,(function(t){return t.minima-2})),d3.max(a,(function(t){return t.minima+2}))]);d.count={x:e,y:s},y(a)}))}()}));window.addEventListener("resize",(function(){v()})),d3.csv("csv/day-by-day/Albacete-diarias.csv",(function(a,e){var n,s,r;a?console.log(a):(t=e,(t=e.filter((function(t){return String(t.fecha).match(/08-01$/)}))).forEach((function(t){t.fecha=t.fecha,t.maxima=+t.maxima,t.minima=+t.minima,t.year=f(t.fecha)})),(r=u.select(".scatter-inputs-container")).append("g").attr("class","axis axis-x"),r.append("g").attr("class","axis axis-y"),r.append("g").attr("class","scatter-inputs-container-dos"),n=d3.scaleLinear().domain([d3.min(t,(function(t){return t.year})),d3.max(t,(function(t){return t.year}))]),s=d3.scaleLinear().domain([d3.min(t,(function(t){return t.minima-2})),d3.max(t,(function(t){return t.minima+2}))]),d.count={x:n,y:s},y(t))})),o(r),p.on("change",(function(){d3.select(this).property("value").replace(/ /g,"_").normalize("NFD").replace(/[\u0300-\u036f]/g,"");v()}))}(),function(){var t,a={top:0,right:16,bottom:24,left:32},e=0,n=0,r=d3.select(".chart-vulturno"),c=r.select("svg"),i={},l=r.append("div").attr("class","tooltip tooltip-temp").style("opacity",0),u=d3.bisector((function(t){return t.year})).left,d=function(t,a){i.count.x.range([0,t]),i.count.y.range([a,0])},p=function(s){var c=d3.axisBottom(i.count.x).tickPadding(5).tickFormat(d3.format("d")).ticks(13);s.select(".axis-x").attr("transform","translate(0,".concat(n,")")).transition().duration(500).ease(d3.easeLinear).call(c);var o=d3.axisLeft(i.count.y).tickPadding(5).tickFormat((function(t){return t+"ºC"})).tickSize(-e).ticks(6);s.select(".axis-y").transition().duration(500).ease(d3.easeLinear).call(o);var d=s.select(".focus"),p=s.select(".overlay");d.select(".x-hover-line").attr("y2",n),p.attr("width",e+a.left+a.right).attr("height",n).on("mouseover",(function(){d.style("display",null)})).on("mouseout",(function(){d.style("display","none"),l.style("opacity",0)})).on("mousemove",(function(){var a=r.node().offsetWidth/2-176,e=i.count.x.invert(d3.mouse(this)[0]),n=u(t,e,1),s=t[n-1],c=t[n],o=e-s.fecha>c.fecha-e?c:s;l.style("opacity",1).html('<p class="tooltip-media-texto">En <strong>'.concat(o.year,"</strong> la temperatura media fue de <strong>").concat(o.temp," ºC</strong>.<p/>")).style("left","".concat(a,"px")),d.select(".x-hover-line").attr("transform","translate(".concat(i.count.x(o.fecha),",",0,")"))}))};function m(s){var o=r.node().offsetWidth;e=o-a.left-a.right,n=544-a.top-a.bottom,c.attr("width",o).attr("height",544);var l="translate(".concat(a.left,",").concat(a.top,")"),u=c.select(".chart-vulturno-container");u.attr("transform",l),d(e,n);var m=r.select(".chart-vulturno-container-bis"),f=m.selectAll(".lines").data([t]),g=d3.line().x((function(t){return i.count.x(t.year)})).y((function(t){return i.count.y(t.temp)})),x=m.selectAll(".circles").remove().exit().data(t),y=f.enter().append("path").attr("class","lines"),v=x.enter().append("circle").attr("class","circles");f.merge(y).transition().duration(600).ease(d3.easeLinear).attr("d",g),x.merge(v).attr("cx",(function(t){return i.count.x(t.year)})).attr("cy",0).transition().delay((function(t,a){return 10*a})).duration(500).ease(d3.easeLinear).attr("cx",(function(t){return i.count.x(t.year)})).attr("cy",(function(t){return i.count.y(t.temp)})),p(u)}function f(a){d3.csv("csv/".concat(a,".csv"),(function(a,s){(t=s).forEach((function(t){t.temp=+t.temp,t.year=t.year,t.fecha=+t.year,t.tempmax=+t.tempmax,t.yearmax=t.yearmax,t.tempmin=+t.tempmin,t.yearmin=t.yearmin})),i.count.x.range([0,e]),i.count.y.range([n,0]);var r=d3.scaleTime().domain([d3.min(t,(function(t){return t.year})),d3.max(t,(function(t){return t.year}))]),c=d3.scaleLinear().domain([d3.min(t,(function(t){return t.temp-2})),d3.max(t,(function(t){return t.temp+2}))]);i.count={x:r,y:c},m()}))}window.addEventListener("resize",(function(){var a=d3.select("#select-city").property("value").replace(/[\u00f1-\u036f]/g,"").replace(/ /g,"_").replace(/á/g,"a").replace(/Á/g,"A").replace(/é/g,"e").replace(/è/g,"e").replace(/í/g,"i").replace(/ó/g,"o").replace(/ú/g,"u").replace(/ñ/g,"n");d3.csv("csv/".concat(a,".csv"),(function(a,e){t=e,m()}))})),d3.csv("csv/Albacete.csv",(function(a){var e,n,s;(t=a).forEach((function(t){t.year=t.year,t.temp=t.temp,t.fecha=+t.year})),(e=c.select(".chart-vulturno-container")).append("g").attr("class","axis axis-x"),e.append("g").attr("class","axis axis-y"),e.append("g").attr("class","chart-vulturno-container-bis"),e.append("rect").attr("class","overlay"),e.append("g").attr("class","focus").style("display","none").append("line").attr("class","x-hover-line hover-line").attr("y1",0),e.select(".focus").append("text").attr("class","text-focus"),n=d3.scaleTime().domain([d3.min(t,(function(t){return t.year})),d3.max(t,(function(t){return t.year}))]),s=d3.scaleLinear().domain([d3.min(t,(function(t){return t.temp-1})),d3.max(t,(function(t){return t.temp+1}))]),i.count={x:n,y:s},m(),f("Albacete")})),o(s),d3.select("#select-city").on("change",(function(){f(d3.select(this).property("value").replace(/ /g,"_").normalize("NFD").replace(/[\u0300-\u036f]/g,""))}))}(),z(g[0]),z(g[1]),v=0,h=48,b=24,L=24,C=0,k=0,w=0,T=0,E=d3.select(".chart-temperature-max"),A=E.select("svg"),S={},B=function(t){w=E.node().offsetWidth,C=w-L-h,k=(T=208)-v-b,A.attr("width",w).attr("height",T);var a="translate(".concat(L,",").concat(v,")"),e=A.select(".chart-temperature-max-container");e.attr("transform",a),function(t){S.count.x.range([0,t])}(C);var n=E.select(".chart-temperature-max-container-bis").selectAll(".circles-max").data(t),s=n.enter().append("circle").attr("class","circles-max");n.merge(s).attr("cx",(function(t){return S.count.x(t.fecha)})).attr("cy",k/2).attr("r",0).transition().delay((function(t,a){return 10*a})).duration(500).attr("r",(function(t){return 3*t.total})).attr("fill-opacity",.6),function(t){var a=d3.axisBottom(S.count.x).tickFormat(d3.format("d")).ticks(6).tickPadding(30);t.select(".axis-x").attr("transform","translate(0,".concat(k/2,")")).call(a)}(e)},window.addEventListener("resize",(function(){B(y)})),d3.csv("csv/max-record.csv",(function(t,a){var n,s,r;t?console.log(t):((y=a).forEach((function(t){t.fecha=t.yearmax,t.total=t.totalmax})),(r=A.select(".chart-temperature-max-container")).append("g").attr("class","axis axis-x"),r.append("g").attr("class","chart-temperature-max-container-bis"),n=d3.scaleLinear().domain([d3.min(y,(function(t){return t.fecha})),d3.max(y,(function(t){return t.fecha}))]),s=d3.scaleLinear().domain([d3.min(y,(function(t){return t.total})),d3.max(y,(function(t){return t.total}))]),S.count={x:n,y:s},d3.csv("csv/max-record.csv",(function(t,a){if(t)console.log(t);else{(y=a).forEach((function(t){t.fecha=t.yearmax,t.total=t.totalmax}));var n=[{data:{year:2012},y:100,dy:-50,dx:-52,note:{title:"Entre 2009 y 2018 se establecen el 78% de los récords de máximas",wrap:230,align:"middle"}}].map((function(t){return e.subject={radius:4},t}));window.makeAnnotations=d3.annotation().annotations(n).type(d3.annotationCalloutCircle).accessors({x:function(t){return S.count.x(t.year)},y:function(t){return S.count.y(t.total)}}).accessorsInverse({year:function(t){return S.count.x.invert(t.x)},total:function(t){return S.count.y.invert(t.y)}}).on("subjectover",(function(t){t.type.a.selectAll("g.annotation-connector, g.annotation-note").classed("hidden",!1)})).on("subjectout",(function(t){t.type.a.selectAll("g.annotation-connector, g.annotation-note").classed("hidden",!0)})),A.append("g").attr("class","annotation-test").call(makeAnnotations),A.selectAll("g.annotation-connector, g.annotation-note")}})),B(y))})),function(){var t,a=16,e=16,n=24,s=32,r=0,c=0,o=d3.select(".chart-tropical"),i=o.select("svg"),l={},u=o.append("div").attr("class","tooltip tooltip-tropical").style("opacity",0),d=function(t){var a=d3.axisBottom(l.count.x).tickFormat(d3.format("d")).ticks(13).tickValues(l.count.x.domain().filter((function(t,a){return!(a%5)})));t.select(".axis-x").attr("transform","translate(0,".concat(c,")")).call(a);var e=d3.axisLeft(l.count.y).tickFormat(d3.format("d")).ticks(5).tickSizeInner(-r);t.select(".axis-y").call(e)},p=function(t){var p=o.node().offsetWidth;r=p-s-e,c=544-a-n,i.attr("width",p).attr("height",544);var m="translate(".concat(s,",").concat(a,")"),f=i.select(".chart-tropical-container");f.attr("transform",m),function(t,a){l.count.x.range([0,t]).paddingInner(-.1),l.count.y.range([a,0])}(r,c);var g=o.select(".chart-tropical-container-bis").selectAll(".bar-tropical").data(t),x=g.enter().append("rect").attr("class","bar-tropical");g.merge(x).on("mouseover",(function(t){var a=l.count.x(t.year)+270,e="".concat(d3.event.pageX,"px"),n="".concat(d3.event.pageX-210,"px");u.transition(),u.style("opacity",1).html('\n                        <p class="tooltip-year">En <strong>'.concat(t.year,"</strong> hubo un total de <strong>").concat(t.total,"</strong> noches tropicales.</p>\n                        ")).style("left",a>p?n:e).style("top","".concat(d3.event.pageY-28,"px"))})).on("mouseout",(function(t){u.transition().duration(300).style("opacity",0)})).transition().duration(500).ease(d3.easeLinear).attr("width",l.count.x.bandwidth()).attr("x",(function(t){return l.count.x(t.year)})).attr("y",(function(t){return l.count.y(t.total)})).attr("height",(function(t){return c-l.count.y(t.total)})),d(f),d(f)};window.addEventListener("resize",(function(){p(t)})),d3.csv("csv/total-tropicales.csv",(function(a,e){var n,s,r;a?console.log(a):((t=e).forEach((function(t){t.year=+t.year,t.total=+t.total})),(r=i.select(".chart-tropical-container")).append("g").attr("class","axis axis-x"),r.append("g").attr("class","axis axis-y"),r.append("g").attr("class","chart-tropical-container-bis"),n=d3.scaleBand().domain(t.map((function(t){return t.year}))),s=d3.scaleLinear().domain([0,d3.max(t,(function(t){return 1.25*t.total}))]),l.count={x:n,y:s},p(t))}))}(),function(){var t,a=0,e=16,n=24,s=32,r=0,c=0,o=d3.select(".chart-frosty"),i=o.select("svg"),l={},u=function(t){var u=o.node().offsetWidth;r=u-s-e,c=544-a-n,i.attr("width",u).attr("height",544);var d="translate(".concat(s,",").concat(a,")"),p=i.select(".chart-frosty-container");p.attr("transform",d);var m=d3.area().x((function(t){return l.count.x(t.year)})).y0(c).y1((function(t){return l.count.y(t.total)}));!function(t,a){l.count.x.range([0,t]),l.count.y.range([a,0])}(r,c);var f=o.select(".chart-frosty-container-bis").selectAll(".area-frosty").data([t]),g=f.enter().append("path").attr("class","area-frosty");f.merge(g).transition().duration(600).ease(d3.easeLinear).attr("d",m),function(t){var a=d3.axisBottom(l.count.x).tickFormat(d3.format("d")).ticks(13);t.select(".axis-x").attr("transform","translate(0,".concat(c,")")).call(a);var e=d3.axisLeft(l.count.y).tickFormat(d3.format("d")).ticks(5).tickSizeInner(-r);t.select(".axis-y").call(e)}(p)};window.addEventListener("resize",(function(){u(t)})),d3.csv("csv/total-heladas.csv",(function(a,e){var n,s,r;a?console.log(a):((t=e).forEach((function(t){t.year=t.year,t.total=+t.total})),(r=i.select(".chart-frosty-container")).append("g").attr("class","axis axis-x"),r.append("g").attr("class","axis axis-y"),r.append("g").attr("class","chart-frosty-container-bis"),n=d3.scaleTime().domain([d3.min(t,(function(t){return t.year})),d3.max(t,(function(t){return t.year}))]),s=d3.scaleLinear().domain([0,d3.max(t,(function(t){return 1.25*t.total}))]),l.count={x:n,y:s},u(t))}))}(),function(){var t,a=0,n=48,s=24,r=24,c=0,o=0,i=0,l=0,u=d3.select(".chart-temperature-min"),d=u.select("svg"),p={},m=function(t){i=u.node().offsetWidth,c=i-r-n,o=(l=208)-a-s,d.attr("width",i).attr("height",l);var e="translate(".concat(r,",").concat(a,")"),m=d.select(".chart-temperature-min-container");m.attr("transform",e),function(t){p.count.x.range([0,t])}(c),function(t){var a=d3.axisBottom(p.count.x).tickFormat(d3.format("d")).ticks(6).tickPadding(30);t.select(".axis-x").attr("transform","translate(0,".concat(o/2,")")).call(a)}(m);var f=u.select(".chart-temperature-min-container-bis").selectAll(".circles-min").data(t),g=f.enter().append("circle").attr("class","circles-min");f.merge(g).attr("cx",(function(t){return p.count.x(t.fecha)})).attr("cy",o/2).attr("r",0).transition().delay((function(t,a){return 10*a})).duration(500).attr("r",(function(t){return 3*t.total})).attr("fill-opacity",.6)};window.addEventListener("resize",(function(){m(t)})),d3.csv("csv/min-record.csv",(function(a,n){var s,r;a?console.log(a):((t=n).forEach((function(t){t.fecha=t.yearmin,t.total=t.totalmin})),(r=d.select(".chart-temperature-min-container")).append("g").attr("class","axis axis-x"),r.append("g").attr("class","chart-temperature-min-container-bis"),s=d3.scaleLinear().domain([d3.min(t,(function(t){return t.fecha})),d3.max(t,(function(t){return t.fecha}))]),p.count={x:s},d3.csv("csv/min-record.csv",(function(a,n){if(a)console.log(a);else{(t=n).forEach((function(t){t.fecha=t.yearmin,t.total=t.totalmin}));var s=[{data:{year:1988},y:100,dy:-50,note:{title:"Desde 1986 no se ha batido ni un solo récord de temperatura mínima",wrap:230,align:"middle"}}].map((function(t){return e.subject={radius:4},t}));window.makeAnnotations=d3.annotation().annotations(s).type(d3.annotationCalloutCircle).accessors({x:function(t){return p.count.x(t.year)},y:function(t){return p.count.y(t.total)}}).accessorsInverse({year:function(t){return p.count.x.invert(t.x)},total:function(t){return p.count.y.invert(t.y)}}).on("subjectover",(function(t){t.type.a.selectAll("g.annotation-connector, g.annotation-note").classed("hidden",!1)})).on("subjectout",(function(t){t.type.a.selectAll("g.annotation-connector, g.annotation-note").classed("hidden",!0)})),d.append("g").attr("class","annotation-test").call(makeAnnotations),d.selectAll("g.annotation-connector, g.annotation-note")}})),m(t))}))}(),function(){var t,a={top:16,right:16,bottom:24,left:32},e=0,n=0,s=d3.select(".chart-temperature-ext"),r=s.select("svg"),c={},o=s.append("div").attr("class","tooltip tooltip-tropical").style("opacity",0),i=function(){var a=d3.scaleBand().domain(t.map((function(t){return t.fecha}))),e=d3.scaleLinear().domain([0,d3.max(t,(function(t){return 1.25*t.tropical}))]);c.count={x:a,y:e}},l=function(t,a){c.count.x.range([0,t]).paddingInner(-.1),c.count.y.range([a,0])},u=function(t){var a=d3.axisBottom(c.count.x).tickPadding(5).tickFormat(d3.format("d")).ticks(13).tickValues(c.count.x.domain().filter((function(t,a){return!(a%5)})));t.select(".axis-x").attr("transform","translate(0,".concat(n,")")).transition().duration(500).ease(d3.easeLinear).call(a);var s=d3.axisLeft(c.count.y).tickPadding(5).tickFormat((function(t){return t})).tickSize(-e).ticks(6);t.select(".axis-y").transition().duration(500).ease(d3.easeLinear).call(s)};function d(i){var d=s.node().offsetWidth;e=d-a.left-a.right,n=544-a.top-a.bottom,r.attr("width",d).attr("height",544);var p="translate(".concat(a.left,",").concat(a.top,")"),m=r.select(".chart-temperature-ext-container");m.attr("transform",p),l(e,n);var f=s.select(".chart-temperature-ext-container-bis").selectAll(".rect-ext").data(t),g=f.enter().append("rect").attr("class","rect-ext");f.merge(g).on("mouseover",(function(t){var a=d3.select("#select-ext").property("value"),e=c.count.x(t.fecha)+270,n="".concat(d3.event.pageX,"px"),s="".concat(d3.event.pageX-210,"px");o.transition(),o.style("opacity",1).html('\n                                <p class="tooltip-year">En <strong>'.concat(t.fecha,"</strong> hubo <strong>").concat(t.tropical,"</strong> días en los que la máxima fue superior a <strong>").concat(a,"ºC</strong>.</p>\n                                ")).style("left",e>d?s:n).style("top","".concat(d3.event.pageY-28,"px"))})).on("mouseout",(function(t){o.transition().duration(300).style("opacity",0)})).transition().duration(500).ease(d3.easeLinear).attr("width",c.count.x.bandwidth()).attr("x",(function(t){return c.count.x(t.fecha)})).attr("y",(function(t){return c.count.y(t.tropical)})).attr("height",(function(t){return n-c.count.y(t.tropical)})),u(m)}function p(a){d3.csv("csv/total-temp-".concat(a,".csv"),(function(a,e){(t=e).forEach((function(t){t.fecha=+t.year,t.tropical=+t.total})),i(),d()}))}window.addEventListener("resize",(function(){var a=d3.select("#select-ext").property("value").replace(/[\u00f1-\u036f]/g,"").replace(/ /g,"_").replace(/á/g,"a").replace(/Á/g,"A").replace(/é/g,"e").replace(/è/g,"e").replace(/í/g,"i").replace(/ó/g,"o").replace(/ú/g,"u").replace(/ñ/g,"n");d3.csv("csv/total-temp-".concat(a,".csv"),(function(a,e){(t=e).forEach((function(t){t.fecha=+t.year,t.tropical=+t.total})),d()}))})),d3.csv("csv/total-temp-35.csv",(function(a,e){var n;a?console.log(a):((t=e).forEach((function(t){t.fecha=+t.year,t.tropical=+t.total})),(n=r.select(".chart-temperature-ext-container")).append("g").attr("class","axis axis-x"),n.append("g").attr("class","axis axis-y"),n.append("g").attr("class","chart-temperature-ext-container-bis"),i(),d(),p("35"))})),d3.csv("csv/temperature.csv",(function(a,e){if(a)console.log(a);else{t=e;var n=d3.nest().key((function(t){return t.Name})).entries(t),s=d3.select("#select-ext");s.selectAll("option").data(n).enter().append("option").attr("value",(function(t){return t.key})).text((function(t){var a=t.key;return"".concat(a,"ºC")})),s.on("change",(function(){p(d3.select(this).property("value").replace(/ /g,"_").normalize("NFD").replace(/[\u0300-\u036f]/g,""))}))}}))}(),new SlimSelect({select:"#select-city",searchPlaceholder:"Busca tu ciudad"}),new SlimSelect({select:"#select-scatter-city",searchPlaceholder:"Busca tu ciudad"}),new SlimSelect({select:"#select-city-tropical",searchPlaceholder:"Busca tu ciudad"}),new SlimSelect({select:"#select-ext",searchPlaceholder:"Selecciona temperatura"}),new SlimSelect({select:"#select-month-max",searchPlaceholder:"Selecciona un mes"}),new SlimSelect({select:"#select-month-min",searchPlaceholder:"Selecciona un mes"}),new SlimSelect({select:"#select-cities-records-max",searchPlaceholder:"Selecciona una ciudad"}),new SlimSelect({select:"#select-cities-records-min",searchPlaceholder:"Selecciona una ciudad"});
